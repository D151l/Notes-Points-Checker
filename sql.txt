drop database if exists notesPointsChecker;
create database notesPointsChecker;
use notesPointsChecker;

CREATE TABLE subjects (
  id VARCHAR(30) NOT NULL,
  displayName VARCHAR(30),
  PRIMARY KEY(id)
);

CREATE TABLE grades (
  grade INT NOT NULL,
  subjectId VARCHAR(30) NOT NULL,
  advancedCourse INT NOT NULL,
  email VARCHAR(30) NOT NULL,
  FOREIGN KEY(subjectId) REFERENCES subjects(id)
);

CREATE TABLE users (
  id INT NOT NULL,
  displayName VARCHAR(30) NOT NULL,
  email VARCHAR(30) NOT NULL,
  password VARCHAR(128) NOT NULL,
  createdAt TIMESTAMP  NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY(id)
);

CREATE TABLE password_reset (
  token VARCHAR(32) NOT NULL,
  userid INT NOT NULL,
  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  expireAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY(token), FOREIGN KEY(userid) REFERENCES users(id)
);

INSERT INTO subjects (id,displayName) VALUES ('deutsch','Deutsch');
INSERT INTO subjects (id,displayName) VALUES ('wun','Werte und Normen');
INSERT INTO subjects (id,displayName) VALUES ('mathe','Mahte');
INSERT INTO subjects (id,displayName) VALUES ('englisch','Englisch');
INSERT INTO subjects (id,displayName) VALUES ('int','Informations Technick');
INSERT INTO subjects (id,displayName) VALUES ('bifim','Berufliche Imformatik');
INSERT INTO subjects (id,displayName) VALUES ('praxis','Fach Praxis');
INSERT INTO subjects (id,displayName) VALUES ('physik','Physik');
INSERT INTO subjects (id,displayName) VALUES ('bvi','Witschaft');
INSERT INTO subjects (id,displayName) VALUES ('sport','Sport');